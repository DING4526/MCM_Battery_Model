# 温度与老化修正的连续时间电池模型（基础动力模型添加电压SOC修正）

## 一、建模总原则

模型目标是：

> **在给定使用强度、环境条件和历史状态的情况下，预测 SOC 演化与 Time-to-Empty。** 温度与老化修正的连续时间电池模型

因此，本模型遵循以下原则（系统级、分钟–小时尺度）：

1. **连续时间建模**（满足题目 Requirement 1）温度与老化修正的连续时间电池模型
2. **功耗驱动 SOC 演化**，避免引入不可观测的电化学细节 温度与老化修正的连续时间电池模型
3. **区分环境温度与电池内部温度**，温度作为系统状态变量 温度与老化修正的连续时间电池模型
4. **老化作为“有效容量修正”而非慢时间动力学过程** 温度与老化修正的连续时间电池模型

------

## 二、状态变量与外部输入

### 状态变量

- $SOC(t)$：电池荷电状态 温度与老化修正的连续时间电池模型
- $T_b(t)$：电池内部平均温度 温度与老化修正的连续时间电池模型

### 外部输入

- $T_{amb}(t)$：环境温度 温度与老化修正的连续时间电池模型
- $P_{\text{tot}}(t)$：手机系统总功耗（由屏幕、CPU、通信等子模型给出）温度与老化修正的连续时间电池模型

------

## 三、SOC 主模型（连续时间）

本模型以“功耗 → 电池电流 → SOC”作为闭合链路。SOC 采用“剩余可用电荷量占有效容量比例”的标准定义，并把温度与老化影响统一吸收到有效容量 $Q_{\text{eff}}$ 中（见第六节）。

### 3.1 核心演化方程（功耗驱动）

令 $SOC(t)\in(0,1)$，开路电压为 $V_{\mathrm{oc}}(SOC)$，有效可用容量为 $Q_{\text{eff}}(T_b,A)$。由功率一致性
$$
P_{\text{tot}}(t)=V_{\mathrm{oc}}(SOC)\,I(t)
\quad\Rightarrow\quad
I(t)=\frac{P_{\text{tot}}(t)}{V_{\mathrm{oc}}(SOC)}
$$
以及库仑计量
$$
\frac{dSOC}{dt}=-\frac{I(t)}{Q_{\text{eff}}(T_b,A)}
$$
得到 SOC 连续时间主方程：
$$
\boxed{
\frac{dSOC}{dt}
=
-\frac{P_{\text{tot}}(t)}
{V_{\mathrm{oc}}(SOC)\,Q_{\text{eff}}(T_b, A)}
}
\tag{1}
$$

> 物理解释：在同一功耗需求下，若电池在某 SOC 区间的 $V_{\mathrm{oc}}$ 更低，则等效电流更大、SOC 下降更快；若低温或老化使 $Q_{\text{eff}}$ 变小，则同样的电流消耗会导致 SOC 更快下降，从而缩短续航。

------

## 四、开路电压–SOC 映射 $V_{\mathrm{oc}}(SOC)$ 的模型设计（新增补全）

在式 (1) 中，$V_{\mathrm{oc}}(SOC)$ 是把系统层功耗转换为电池电流的关键闭合关系。为在不引入 RC 极化等瞬态电路状态的前提下，仍刻画 OCV–SOC 曲线的非线性形状，本模型采用一个低参数、解析可微、便于拟合的经验型参数化：

### 4.1 参数化形式

$$
\boxed{
V_{\mathrm{oc}}(s)=V_0+a_1 s+a_2\ln(s)+a_3\ln(1-s)
}
\tag{2}
$$

其中 $s=SOC$。

### 4.2 结构动机与各项作用

- **$V_0$**：给出电压平台的基准水平（手机锂电标称电压通常在 3.6–3.7 V 附近）。
- **$a_1 s$**：刻画中段 SOC 区间电压缓慢变化的“一阶趋势”。
- **$a_2\ln(s)$**：控制低 SOC 端 $s\to 0^+$ 的陡峭性（避免仅用线性项无法反映尾段快速下坠）。
- **$a_3\ln(1-s)$**：控制高 SOC 端 $s\to 1^-$ 的逼近形状（用于刻画接近满电时的非线性上翘/趋缓）。

这种“线性 + 两端对数项”的结构本质上用极少参数同时覆盖：中段缓变 + 两端陡变，适合作为系统级续航建模的 OCV 闭合项。

### 4.3 数值实现（避免 $\ln(0)$）

式 (2) 在 $s=0$ 或 $s=1$ 处存在对数奇异。仿真与 ODE 求解时采用截断：
$$
s_c=\min\bigl(1-\varepsilon,\;\max(\varepsilon,\;s)\bigr),
\quad \varepsilon\in[10^{-6},10^{-3}]
\tag{3}
$$
并用 $s_c$ 代入 $\ln(s)$、$\ln(1-s)$，保证数值稳定。

### 4.4 为何未采用 Rint 等效电路模型

在等效电路建模中，Rint 模型通常将端电压表示为
$$
V_{\text{term}}
=
V_{\mathrm{oc}}(SOC)
-
I\,R_{\text{int}},
\tag{X}
$$
其中 $R_{\text{int}}$ 表示电池内部等效电阻。该模型主要用于刻画负载变化下的端电压瞬态响应，而 $R_{\text{int}}$ 本身随 SOC、温度与老化状态显著变化，需要额外参数或状态进行描述。在以分钟–小时尺度续航时间（Time-to-Empty）为研究目标的系统级建模中，上述欧姆压降项对累计 SOC 消耗的影响相对次要，且会显著增加模型复杂度。基于此，本文未采用 Rint 模型计算电压，而是直接通过 $V_{\mathrm{oc}}(SOC)$ 描述 SOC 区间电压特性，并将温度与老化影响统一体现在有效容量 $Q_{\mathrm{eff}}$ 中，以突出影响续航的主导机制。

------

## 五、温度建模：区分环境温度与电池温度

### 5.1 电池温度动力学模型

大量文献表明，在系统级建模中，将电池视为**热容集中体（lumped thermal model）**能够在复杂度与精度之间取得良好平衡，因此采用一阶热平衡模型：温度与老化修正的连续时间电池模型
$$
\boxed{
C_{th}\frac{dT_b}{dt}
=
\eta_{\text{heat}} P_{\text{tot}}(t)
-
h\bigl(T_b - T_{amb}(t)\bigr)
}
\tag{4}
$$
**物理含义：**温度与老化修正的连续时间电池模型

- 放电功耗主要转化为焦耳热，是电池升温的主导因素
- 环境温度仅通过热交换项影响电池温度
- 能自然刻画：
	- *cold weather reduces effective capacity*
	- *sustained heavy use may overheat*

这种集中参数热模型可追溯至 Bernardi–Newman 能量平衡框架，并被广泛用于锂离子电池热行为建模。温度与老化修正的连续时间电池模型

### 5.2 温度对有效容量的修正（动机保持不变）

实验与综述研究一致指出：温度与老化修正的连续时间电池模型

- **高温下容量提升有限**
- **低温下有效容量快速下降，且呈非线性特征**

由于赛题关注的是续航而非反应机理，我们仅在**有效容量层面**引入温度修正。温度与老化修正的连续时间电池模型

------

## 六、有效容量 $Q_{\text{eff}}$ 的温度/老化修正（将修正对象统一为容量）

### 6.1 有效容量定义

将原文“有效可用量”的思想保持不变，但在式 (1) 的框架下，用有效容量 $Q_{\text{eff}}$ 来承载温度与老化影响：
$$
\boxed{
Q_{\text{eff}}(T_b,A)
=
Q_0\cdot f_T(T_b)\cdot f_A
}
\tag{5}
$$
其中

- $Q_0$：标称容量（Ah 或 C）
- $f_T(T_b)$：温度修正因子
- $f_A$：老化修正因子

> 注：若需要与规格书能量（Wh）对齐，可用 $E_0\approx V_{\text{nom}}\,Q_0$ 做量纲换算（$V_{\text{nom}}$ 为标称电压），但 SOC 动力学采用式 (1) 的“功耗/电压/容量”闭合更直接、也更稳定。

### 6.2 温度修正函数（低温主导）

基于 Arrhenius 型容量–温度关系及实验观察，定义：温度与老化修正的连续时间电池模型
$$
\boxed{
f_T(T_b)
=
\exp\!\left[-\alpha\,(T_{ref}-T_b)_+\right]
}
\tag{6}
$$
其中 $(x)_+=\max(x,0)$。

**解释：**温度与老化修正的连续时间电池模型

- 当 $T_b \ge T_{ref}$：容量不再显著增加
- 当 $T_b < T_{ref}$：有效容量指数下降
- 准确反映低温环境下“掉电更快”的经验事实

类似的指数型或 Arrhenius 型温度修正形式在锂离子电池有效容量建模中被广泛采用。温度与老化修正的连续时间电池模型

### 6.3 老化修正建模（先简化处理）

#### 建模立场

赛题并未要求预测多年尺度的 SOH 演化，而是关注：温度与老化修正的连续时间电池模型

> **在相同功耗条件下，为什么旧电池的续航更短？**

因此，将老化视为**已发生的历史结果**，而非显式时间演化过程。温度与老化修正的连续时间电池模型

#### 老化修正因子

$$
\boxed{
f_A = 1 - \delta
}
\tag{7}
$$

其中 $\delta$ 为容量损失比例，综合反映循环老化、快充、高 SOC 停留等历史影响。该处理方式在系统级电池模型与 BMS 能量/容量估计中常见，且避免引入不可验证的长期参数。温度与老化修正的连续时间电池模型

------

## 七、最终耦合模型（SOC–温度）

将式 (5)–(7) 代入 SOC 主方程，并与温度动力学联立，得到最终系统：
$$
\boxed{
\begin{cases}
\dfrac{dSOC}{dt}
=
-\dfrac{P_{\text{tot}}(t)}
{V_{\mathrm{oc}}(SOC)\,Q_0\,f_T(T_b)\,f_A}
\\[10pt]
C_{th}\dfrac{dT_b}{dt}
=
\eta_{\text{heat}}P_{\text{tot}}(t)
-
h\bigl(T_b-T_{amb}(t)\bigr)
\end{cases}
}
\tag{8}
$$
该模型满足：温度与老化修正的连续时间电池模型

- 连续时间 ✔
- 物理可解释 ✔
- 参数可估 ✔
- 与 Time-to-Empty 强相关 ✔

------

## 八、参数表（结合文献量级 + OCV 参数补全）

> 说明：下表保留原文参数并扩充：加入 $Q_0$ 与 $V_{\mathrm{oc}}$ 参数组（含你提供的典型范围），同时保留 $E_0$ 作为与手机规格（Wh）对齐的规格量。温度与老化修正的连续时间电池模型

| 参数                 | 含义                  | 典型取值/范围              | 依据/说明                                                    |
| -------------------- | --------------------- | -------------------------- | ------------------------------------------------------------ |
| $Q_0$                | 标称容量              | 4–6 Ah（约 4000–6000 mAh） | 与 $E_0\approx V_{\text{nom}}Q_0$ 一致（按 $V_{\text{nom}}\approx 3.6\text{–}3.7$ V） |
| $C_{th}$             | 热容                  | 40–80 J/K                  | 集中热模型（原表）温度与老化修正的连续时间电池模型           |
| $h$                  | 散热系数              | 0.5–2 W/K                  | 自然对流（原表）温度与老化修正的连续时间电池模型             |
| $\eta_{\text{heat}}$ | 发热比例              | 0.7–0.9                    | 焦耳热主导（原表）温度与老化修正的连续时间电池模型           |
| $T_{ref}$            | 参考温度              | 298 K                      | 常用室温（原表）温度与老化修正的连续时间电池模型             |
| $\alpha$             | 低温敏感系数          | 0.02–0.05 K$^{-1}$         | 容量–温度实验（原表）温度与老化修正的连续时间电池模型        |
| $\delta$             | 老化损失比例          | 0–0.3                      | 工程经验（原表）温度与老化修正的连续时间电池模型             |
| $V_0$                | OCV 基准电压项        | 3.6–3.7 V                  | 你提供的典型范围；与锂电标称电压量级一致                     |
| $a_1$                | OCV 线性斜率项        | 0.1–0.3                    | 你提供的典型范围（中段趋势）                                 |
| $a_2$                | OCV 低 SOC 对数项权重 | 0.02–0.05                  | 你提供的典型范围（控制 $s\to0^+$ 端陡峭）                    |
| $a_3$                | OCV 高 SOC 对数项权重 | 0.02–0.05                  | 你提供的典型范围（控制 $s\to1^-$ 端陡峭）                    |
| $\varepsilon$        | OCV 对数截断阈值      | $10^{-6}$–$10^{-3}$        | 数值稳定性设置（避免 $\ln 0$）                               |

------

## 参考文献（扩充版）

**热模型与温度/容量影响（保留原文编号）：** 温度与老化修正的连续时间电池模型
 **[R1]** Ma, S. S., et al. *Temperature effect and thermal impact in lithium-ion batteries: A review*. **Journal of Power Sources**, 2018.
 **[R2]** Wang, D., et al. *A lithium-ion battery electrochemical–thermal model for wide temperature range applications*. **Electrochimica Acta**, 2020.
 **[R3]** Madani, S. S., et al. *Thermal Behavior Modeling of Lithium-Ion Batteries: A Comprehensive Review*. **Symmetry**, 2023.

**OCV–SOC 参数化与对数结构支撑（新增）：**
 **[R4]** **Plett, G. L.**,*Extended Kalman filtering for battery management systems of Li-ion batteries.* **Journal of Power Sources**, 134(2), 252–261, 2004.

